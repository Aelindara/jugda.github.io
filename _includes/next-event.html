{% assign creationTime = site.time | date: '%s' %}
{% assign upcomingTalk = site.posts.first %}
{% for post in site.posts %}
  {% assign talkTime = post.date | date: '%s' %}
  {%if creationTime <= talkTime %}
    {% assign upcomingTalk = post %}
  {% endif %}
{% endfor %}

<script>
  var today = new Date();
  var talkDate = new Date('{{ upcomingTalk.date | date_to_xmlschema }}');
  var daysTillTalk = Math.ceil((talkDate - today) / 1000 / 60 / 60 / 24);
</script> 

<div class="next-event-container">
<span class="next-event-label">NÃ¤chste Veranstaltung am <time datetime="{{ upcomingTalk.date | date:"%Y-%m-%d" }}">{{ upcomingTalk.date | date:"%d.%m.%Y" }}</time></span>
<span class="next-event-time">noch <script>document.write(daysTillTalk);</script> Tage</span>
<span class="next-event-title">
  {% if upcomingTalk.speaker %}{{ upcomingTalk.speaker }}: {% endif %}
  <a href="{{ upcomingTalk.url | prepend: site.baseurl }}">{{ upcomingTalk.title }}</a>
</span>
{%if upcomingTalk.importantHint %}
  <br/>
  <span class="next-event-importHint">Hinweis: {{ upcomingTalk.importantHint }}</span>
{% endif %}
</div>